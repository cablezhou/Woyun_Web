<template>
  <div class="home" ref="homeRef">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <el-header class="header" :class="{ 'header-hidden': !isHeaderVisible }">
      <div class="title">
        <img src="/imagines/logo.jpg" alt="å§äº‘è½¦é˜Ÿ">
        <div class="divider">|</div>
        <div class="title-text">å§äº‘è½¦é˜Ÿ</div>
      </div>
      <el-menu 
        mode="horizontal" 
        :default-active="activeMenu" 
        @select="handleMenuSelect"
        class="nav-menu"
      >
        <el-menu-item index="1">é¦–é¡µ</el-menu-item>
        <el-sub-menu index="2">
          <template #title>è½¦é˜Ÿä»‹ç»</template>
          <el-menu-item index="2-1">å†å²æ²¿é©</el-menu-item>
          <el-menu-item index="2-2">è½¦é˜Ÿæˆå‘˜</el-menu-item>
        </el-sub-menu>
        <el-menu-item index="3">éª‘è¡Œè·¯çº¿</el-menu-item>
        <el-menu-item index="4">æ´»åŠ¨åŠ¨æ€</el-menu-item>
        <el-menu-item index="5">å§äº‘ç¤¾åŒº</el-menu-item>
        <el-menu-item index="6">è”ç³»æˆ‘ä»¬</el-menu-item>
      </el-menu>
    </el-header>

    <!-- Hero Section -->
    <div class="hero-section" ref="heroSectionRef">
      <video autoplay muted loop class="hero-video">
        <source src="https://cable-website-video.oss-cn-beijing.aliyuncs.com/sample.mp4" type="video/mp4">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚
      </video>
      <div class="hero-content">
        <h1 class="hero-slogan">å“ˆå“ˆå“ˆå“ˆå“ˆè¡Œè€…è‡³åƒé‡Œï¼Œå§äº‘çœ‹æµ®æ²‰</h1>
        <p class="hero-subtitle">ç”¨è½¦è½®ä¸ˆé‡ä¸–ç•Œï¼Œç”¨å¿ƒæ„Ÿå—ç”Ÿæ´»</p>
      </div>
    </div>

    <!-- è½¦é˜Ÿä»‹ç» -->
    <div class="intro-section-new fade-in-section" ref="introRef">
      <div class="intro-content-new">
        <div class="intro-image-new">
          <img src="/imagines/carousel/c1.jpg" alt="è½¦é˜Ÿåˆå½±" class="team-photo-new">
        </div>
        <div class="intro-text-new">
          <h2 class="section-title-new">å…³äºå§äº‘è½¦é˜Ÿ</h2>
          <p class="intro-paragraph-new" style="color: white !important;">
            å§äº‘è½¦é˜Ÿæˆç«‹äº2021å¹´ï¼Œè‚‡å§‹äºæŸéƒ­å§“ç”·å­ç»„ç»‡çš„å‡ æ¬¡éª‘è¡Œæ´»åŠ¨ï¼Œåç”±å¼ºè€…å‘¨å¼€æ’­å‘èµ·ç»„å»ºã€‚å§äº‘è½¦é˜Ÿæ˜¯ä¸€æ”¯å……æ»¡æ´»åŠ›å’Œæ¿€æƒ…çš„éª‘è¡Œå›¢é˜Ÿã€‚æˆ‘ä»¬ç›¸ä¿¡ï¼Œæ¯ä¸€æ¬¡è¸©è¸éƒ½æ˜¯å¯¹ç”Ÿæ´»çš„çƒ­çˆ±ï¼Œæ¯ä¸€æ®µè·¯ç¨‹éƒ½æ˜¯å¿ƒçµæ´—ç¤¼ã€‚
          </p>
          <p class="intro-paragraph-new" style="color: white !important;">
            æˆ‘ä»¬ä¸ä»…ä»…æ˜¯ä¸€æ”¯éª‘è¡Œé˜Ÿä¼ï¼Œæ›´æ˜¯ä¸€ä¸ªæ¸©æš–çš„å¤§å®¶åº­ã€‚åœ¨è¿™é‡Œï¼Œä½ ä¼šé‡åˆ°å¿—åŒé“åˆçš„æœ‹å‹ï¼Œåˆ†äº«éª‘è¡Œçš„å¿«ä¹ï¼Œæ¢ç´¢æœªçŸ¥çš„ç¾æ™¯ã€‚
          </p>
          <div class="team-stats-new">
            <div class="stat-item-new">
              <div class="stat-number-new">20+</div>
              <div class="stat-label-new">é˜Ÿå‘˜</div>
            </div>
            <div class="stat-item-new">
              <div class="stat-number-new">30+</div>
              <div class="stat-label-new">æ´»åŠ¨</div>
            </div>
            <div class="stat-item-new">
              <div class="stat-number-new">5000+</div>
              <div class="stat-label-new">å…¬é‡Œ</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- æ´»åŠ¨äº‹è¿¹ -->
    <div class="activities-section fade-in-section" ref="activityRef">
      <h2 class="section-title-new text-center">æ´»åŠ¨äº‹è¿¹</h2>
      <div class="timeline-container">
        <div class="timeline-line"></div>
        <div class="timeline-item" v-for="(activity, index) in activities" :key="activity.id" :class="{ 'timeline-item-right': index % 2 === 1 }">
          <div class="timeline-dot"></div>
          <div class="timeline-content">
            <div class="activity-image">
              <img :src="activity.image" :alt="activity.name" class="activity-img">
            </div>
            <div class="activity-info">
              <h3 class="activity-name">{{ activity.name }}</h3>
              <p class="activity-date">{{ activity.date }}</p>
              <p class="activity-description">{{ activity.description }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>



    <!-- å“ç‰Œå±•ç¤ºåŒºåŸŸ -->
    <div class="brand-section fade-in-section" ref="brandRef">
      <div class="brand-content">
        <div class="brand-text">
          <h2 class="brand-title">å¾é€”æ— ç•Œ</h2>
          <h3 class="brand-subtitle">æ¢ç´¢æ— é™</h3>
          <p class="brand-description">ç”¨è½¦è½®ä¸ˆé‡ä¸–ç•Œçš„å¹¿é˜”ï¼Œç”¨å¿ƒçµæ„Ÿå—ç”Ÿå‘½çš„æ·±åº¦</p>
          <!-- <div class="brand-keywords">
            <span class="keyword">ä¸“ä¸š</span>
            <span class="keyword">æ¿€æƒ…</span>
            <span class="keyword">æ¢ç´¢</span>
          </div> -->
        </div>
      </div>
    </div>

    <!-- Dual Carousel Section -->
    <div class="dual-carousel-section-new fade-in-section" ref="carouselRef">
      <h2 class="section-title-new text-center">ç²¾å½©ç¬é—´ & çƒ­é—¨è·¯çº¿</h2>
      <div class="dual-carousel-container-new">
        <!-- Highlights Carousel -->
        <div class="carousel-item-new">
          <el-carousel height="400px">
            <el-carousel-item v-for="item in highlights" :key="item.title">
              <img :src="item.img" :alt="item.title" class="carousel-img-new">
              <div class="carousel-caption-new">
                <h3>{{ item.title }}</h3>
                <p>{{ item.description }}</p>
              </div>
            </el-carousel-item>
          </el-carousel>
        </div>
        <!-- Routes Carousel -->
        <div class="carousel-item-new">
          <el-carousel height="400px">
            <el-carousel-item v-for="item in routes" :key="item.title">
              <img :src="item.img" :alt="item.title" class="carousel-img-new">
              <div class="carousel-caption-new">
                <h3>{{ item.title }}</h3>
                <p>{{ item.description }}</p>
              </div>
            </el-carousel-item>
          </el-carousel>
        </div>
      </div>
    </div>

    <!-- Philosophy Section -->
    <div class="philosophy-section-new fade-in-section" ref="philosophyRef">
      <h2 class="section-title-new text-center">æˆ‘ä»¬çš„éª‘è¡Œç†å¿µ</h2>
      <div class="philosophy-grid-new">
        <div class="philosophy-item-new" v-for="item in philosophies" :key="item.title">
          <img :src="item.img" :alt="item.title" class="philosophy-img-new">
          <div class="philosophy-content-new">
            <h3>{{ item.title }}</h3>
            <p>{{ item.description }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Join Us Section -->
    <div class="join-section-new fade-in-section" ref="joinRef">
      <div class="join-content-new">
        <h2 class="section-title-new" style="color:white !important;">åŠ å…¥å§äº‘è½¦é˜Ÿ</h2>
        <p class="join-subtitle-new">æ— è®ºä½ æ˜¯éª‘è¡Œæ–°æ‰‹è¿˜æ˜¯èµ„æ·±è½¦å‹ï¼Œæˆ‘ä»¬éƒ½æ¬¢è¿ä½ çš„åŠ å…¥</p>
        
        <!-- å›¢é˜Ÿç‰¹è‰² -->
       <!--  <div class="team-features">
          <div class="feature-item">
            <div class="feature-icon">ğŸš´â€â™‚ï¸</div>
            <h3>ä¸“ä¸šæŒ‡å¯¼</h3>
            <p>èµ„æ·±è½¦å‹å¸¦é˜Ÿï¼Œå®‰å…¨éª‘è¡ŒæŠ€å·§åˆ†äº«</p>
          </div>
          <div class="feature-item">
            <div class="feature-icon">ğŸŒ„</div>
            <h3>ç²¾é€‰è·¯çº¿</h3>
            <p>æ¢ç´¢æœ€ç¾é£æ™¯ï¼Œè®°å½•éš¾å¿˜æ—¶å…‰</p>
          </div>
          <div class="feature-item">
            <div class="feature-icon">ğŸ‘¥</div>
            <h3>å‹å¥½ç¤¾åŒº</h3>
            <p>å¿—åŒé“åˆçš„ä¼™ä¼´ï¼Œå…±åŒæˆé•¿è¿›æ­¥</p>
          </div>
        </div> -->

        <!-- è”ç³»æ–¹å¼ -->
        <div class="contact-info">
          <h3 class="contact-title">è”ç³»æˆ‘ä»¬</h3>
          <div class="contact-details">
            <div class="contact-item">
              <span class="contact-label">QQç¾¤ï¼š</span>
              <span class="contact-value">123456789</span>
            </div>
            <!-- <div class="contact-item">
              <span class="contact-label">æ´»åŠ¨æ—¶é—´ï¼š</span>
              <span class="contact-value">æ¯å‘¨æœ« 8:00-18:00</span>
            </div>
            <div class="contact-item">
              <span class="contact-label">é›†åˆåœ°ç‚¹ï¼š</span>
              <span class="contact-value">å¸‚ä¸­å¿ƒå¹¿åœº</span>
            </div> -->
          </div>
        </div>

        <!-- ç¤¾äº¤åª’ä½“é“¾æ¥ -->
        <div class="social-section">
          <h3 class="social-title">å…³æ³¨æˆ‘ä»¬</h3>
          <div class="social-links">
            <a href="#" class="social-link wechat-link" title="å¾®ä¿¡å…¬ä¼—å·">
              <svg class="social-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8.691 2.188C3.891 2.188 0 5.476 0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59 0 0 1 .213.665l-.39 1.48c-.019.07-.048.141-.048.213 0 .163.13.295.29.295a.326.326 0 0 0 .167-.054l1.903-1.114a.864.864 0 0 1 .717-.098 10.16 10.16 0 0 0 2.837.403c.276 0 .543-.027.811-.05-.857-2.578.157-4.972 1.932-6.446 1.703-1.415 4.882-1.416 6.585 0 1.775 1.474 2.789 3.868 1.932 6.446a5.862 5.862 0 0 0 2.837-.403.864.864 0 0 1 .717.098l1.903 1.114a.326.326 0 0 0 .167.054c.16 0 .29-.132.29-.295 0-.072-.029-.143-.048-.213l-.39-1.48a.59.59 0 0 1 .213-.665C22.83 13.733 24 11.742 24 9.53c0-4.054-3.891-7.342-8.691-7.342-1.785 0-3.433.484-4.809 1.312C9.524 2.672 8.691 2.188 8.691 2.188z"/>
              </svg>
              <span>å¾®ä¿¡å…¬ä¼—å·</span>
            </a>
            <a href="#" class="social-link bilibili-link" title="Bilibili">
              <svg class="social-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M17.813 4.653h.854c1.51.054 2.769.578 3.773 1.574 1.004.995 1.524 2.249 1.56 3.76v7.36c-.036 1.51-.556 2.769-1.56 3.773s-2.262 1.524-3.773 1.56H5.333c-1.51-.036-2.769-.556-3.773-1.56S.036 18.858 0 17.347v-7.36c.036-1.511.556-2.765 1.56-3.76 1.004-.996 2.262-1.52 3.773-1.574h.774l-1.174-1.12a1.234 1.234 0 0 1-.373-.906c0-.356.124-.658.373-.907l.027-.027c.267-.249.573-.373.92-.373.347 0 .653.124.92.373L9.653 4.44c.071.071.134.142.187.213h4.267a.836.836 0 0 1 .16-.213l2.853-2.747c.267-.249.573-.373.92-.373.347 0 .662.151.929.4.267.249.391.551.391.907 0 .356-.124.657-.373.906l-1.174 1.12zM6.4 15.64h2.747v2.747H6.4zm8.853 0h2.747v2.747H15.253zm-4.267-8.533h2.027c.356 0 .653.124.893.373.24.249.36.551.36.907v4.267c0 .355-.12.658-.36.907-.24.249-.537.373-.893.373H10.986c-.356 0-.653-.124-.893-.373-.24-.249-.36-.552-.36-.907V8.387c0-.356.12-.658.36-.907.24-.249.537-.373.893-.373z"/>
              </svg>
              <span>Bilibili</span>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- é¡µè„š -->
    <el-footer class="footer">
      <p class="footer-text">Â© 2025 å§äº‘è½¦é˜Ÿ | è¡Œè€…è‡³åƒé‡Œï¼Œå§äº‘çœ‹æµ®æ²‰</p>
    </el-footer>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onUnmounted } from "vue";
import '../style/HomeView.css';
import '../style/header.css';
import { ElCarousel, ElCarouselItem, ElButton, ElMessage } from 'element-plus';
import 'element-plus/es/components/carousel/style/css';
import 'element-plus/es/components/carousel-item/style/css';
import 'element-plus/es/components/button/style/css';

const activeMenu = ref("1");
const isHeaderVisible = ref(true);
let lastScrollTop = 0;
const homeRef = ref<HTMLElement | null>(null);
const heroSectionRef = ref<HTMLElement | null>(null);
const introRef = ref<HTMLElement | null>(null);
const activityRef = ref<HTMLElement | null>(null);
const carouselRef = ref<HTMLElement | null>(null);
const videoRef = ref<HTMLElement | null>(null);
const brandRef = ref<HTMLElement | null>(null);
const videoElement = ref<HTMLVideoElement | null>(null);
const philosophyRef = ref<HTMLElement | null>(null);
const joinRef = ref<HTMLElement | null>(null);



const highlights = ref([
  {
    img:'Woyun_Web/imagines/carousel/new1.jpg',
    title: 'åŸå¸‚éª‘è¡Œ',
    description: 'ç©¿æ¢­åœ¨åŸå¸‚çš„å¤§è¡—å°å··ï¼Œæ„Ÿå—éƒ½å¸‚çš„è„‰æ'
  },
  {
    img: import.meta.env.BASE_URL + 'imagines/carousel/new3.jpg',
    title: 'å›¢é˜Ÿåˆå½±',
    description: 'è®°å½•æ¯ä¸€æ¬¡å‡ºè¡Œï¼Œç•™ä¸‹ç¾å¥½å›å¿†'
  },
  {
    img: import.meta.env.BASE_URL + 'imagines/carousel/new2.jpg',
    title: 'è‡ªç„¶é£å…‰',
    description: 'è¿œç¦»å–§åš£ï¼Œæ‹¥æŠ±å¤§è‡ªç„¶çš„æ€€æŠ±'
  }
]);

const routes = ref([
  {
    img: import.meta.env.BASE_URL + 'imagines/history/c1.jpg',
    title: 'å±±åœ°æŒ‘æˆ˜çº¿',
    description: 'å¾æœèµ·ä¼å±±è·¯ï¼ŒæŒ‘æˆ˜è‡ªæˆ‘æé™'
  },
  {
    img: import.meta.env.BASE_URL + 'imagines/history/c2.jpg',
    title: 'æ¹–ç•”ä¼‘é—²çº¿',
    description: 'æ²¿æ¹–è€Œè¡Œï¼Œäº«å—å®é™ç¾æ™¯'
  },
  {
    img: import.meta.env.BASE_URL + 'imagines/history/c3.jpg',
    title: 'ä¹¡æ‘æ¢ç´¢çº¿',
    description: 'ç©¿è¶Šç”°é‡ä¹¡é—´ï¼Œä½“éªŒæ·³æœ´é£æƒ…'
  },
  {
    img: import.meta.env.BASE_URL + 'imagines/history/c4.jpg',
    title: 'åŸé™…è¿æ¥çº¿',
    description: 'è¿æ¥åŸå¸‚ä¹‹é—´ï¼Œå¼€å¯é•¿é€”éª‘è¡Œ'
  }
]);

const philosophies = ref([
  {
    img: import.meta.env.BASE_URL + 'imagines/philosophy/å¾®ä¿¡å›¾ç‰‡_20250919145702_94_51.jpg',
    title: 'å®‰å…¨ç¬¬ä¸€',
    description: 'æ¯æ¬¡éª‘è¡Œéƒ½ä¸¥æ ¼éµå®ˆäº¤é€šè§„åˆ™ï¼Œä½©æˆ´å®‰å…¨è£…å¤‡ï¼Œç¡®ä¿æ¯ä½é˜Ÿå‘˜çš„å®‰å…¨ã€‚'
  },
  {
    img: import.meta.env.BASE_URL + 'imagines/philosophy/å¾®ä¿¡å›¾ç‰‡_20250919145704_95_51.jpg',
    title: 'å›¢é˜Ÿåä½œ',
    description: 'ç›¸äº’å¸®åŠ©ï¼Œå…±åŒè¿›æ­¥ï¼Œæ²¡æœ‰äººä¼šè¢«è½ä¸‹ï¼Œæˆ‘ä»¬ä¸€èµ·åˆ°è¾¾ç»ˆç‚¹ã€‚'
  },
  {
    img: import.meta.env.BASE_URL + 'imagines/philosophy/å¾®ä¿¡å›¾ç‰‡_20250919145706_96_51.jpg',
    title: 'ç¯ä¿å‡ºè¡Œ',
    description: 'ç”¨è‡ªè¡Œè½¦ä»£æ›¿æœºåŠ¨è½¦ï¼Œä¸ºç¯ä¿è´¡çŒ®ä¸€ä»½åŠ›é‡ï¼Œä¿æŠ¤æˆ‘ä»¬ç¾ä¸½çš„åœ°çƒã€‚'
  },
  {
    img: import.meta.env.BASE_URL + 'imagines/philosophy/å¾®ä¿¡å›¾ç‰‡_20250919145718_97_51.jpg',
    title: 'æŒ‘æˆ˜è‡ªæˆ‘',
    description: 'ä¸æ–­çªç ´è‡ªå·±çš„æé™ï¼Œåœ¨éª‘è¡Œä¸­å‘ç°æ›´å¼ºå¤§çš„è‡ªå·±ã€‚'
  }
]);

const activities = ref([
  {
    id: 1,
    name: 'æ•£æ—¦é•‡æ¢é™©',
    date: '2021å¹´2æœˆ',
    description: 'æ¢å¯»é™Œç”Ÿè·¯çº¿ï¼Œæˆ˜èƒœæ³¥æ³å±±é™©',
    image: import.meta.env.BASE_URL + 'imagines/1.jpg'
  },
  {
    id: 2,
    name: 'å›¢ç»“ä¹¡éª‘æ¸¸',
    date: 'æˆ‘æ€ä¹ˆè®°å¾—',
    description: 'å›¢ç»“ä¹¡æ¸¸ä¹éª‘è¡Œï¼Œæ¿€å‘éª‘è¡Œæ¿€æƒ…ã€‚',
    image: import.meta.env.BASE_URL + 'imagines/2.jpg'
  },
  {
    id: 3,
    name: 'åˆç™»å§äº‘å±±',
    date: '2021å¹´4æœˆ',
    description: 'éƒ­å‘¨é‡‘ä¸‰äººé¦–æ¬¡æ”€ç™»å§äº‘å±±ï¼ŒæˆåŠŸç™»é¡¶ã€‚',
    image: import.meta.env.BASE_URL + 'imagines/3.jpg'
  },
  {
    id: 4,
    name: '"é˜³åº·"åé¦–æ¬¡æ¢æ»‡',
    date: '2023å¹´1æœˆ',
    description: 'ç—…ä½“åˆæ„ˆï¼Œè½¦é˜Ÿå‡ äººç›¸çº¦ç¯æ»‡å¤å»ºã€‚',
    image: import.meta.env.BASE_URL + 'imagines/4.jpg'
  },
  {
    id: 5,
    name: 'æ˜†æ˜å¼¥å‹’å¤§ç¯çº¿',
    date: '2023å¹´2æœˆ',
    description: 'å†¬å­£ä¸¥å¯’å¤©æ°”ä¸‹éª‘è¡Œï¼Œæ˜†æ˜è‡³å¼¥å‹’ã€‚',
    image: import.meta.env.BASE_URL + 'imagines/5.jpg'
  },
  {
    id: 6,
    name: 'å§äº‘å±±æœåœ£',
    date: '2023å¹´4æœˆ',
    description: 'è½¦é˜Ÿéª‘è¡Œæ´»åŠ¨äººæ•°è‡³å¤šä¹‹è¡Œï¼ŒäºŒç™»å§äº‘å±±',
    image: import.meta.env.BASE_URL + 'imagines/6.jpg'
  }
]);

const handleMenuSelect = (key: string) => {
  activeMenu.value = key;
  // è·¯ç”±è·³è½¬é€»è¾‘
  if (key === '2-2') {
    // è½¦é˜Ÿæˆå‘˜é¡µé¢
    window.location.href = '/team-member';
  } else if (key === '3') {
    // éª‘è¡Œè·¯çº¿é¡µé¢
    window.location.href = '/routes';
  }else if (key === '4') {
    //æç¤ºå¾…å¼€å‘
    ElMessage({
      message: 'å¾…å¼€å‘ing',
      type: 'info',
    });
  } else if (key === '5') {
    // å§äº‘ç¤¾åŒºé¡µé¢
    window.location.href = '/community';
  }
};

const handleScroll = () => {
  const st = document.body.scrollTop;
  if (st > lastScrollTop) {
    // å‘ä¸‹æ»šåŠ¨
    isHeaderVisible.value = false;
  } else {
    // å‘ä¸Šæ»šåŠ¨
    isHeaderVisible.value = true;
  }
  lastScrollTop = st <= 0 ? 0 : st; // For Mobile or negative scrolling
};

// æ»¡å±åŠ¨ç”»è§‚å¯Ÿå™¨
const observeElements = () => {
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('fade-in-active');
        }
      });
    },
    {
      root: null,
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    }
  );

  // è§‚å¯Ÿæ‰€æœ‰éœ€è¦åŠ¨ç”»çš„å…ƒç´ 
  const elementsToObserve = [
    introRef.value,
    activityRef.value,
    carouselRef.value,
    brandRef.value,
    philosophyRef.value,
    joinRef.value
  ];

  elementsToObserve.forEach((el) => {
    if (el) {
      observer.observe(el);
    }
  });
};

onMounted(() => {
  document.body.addEventListener('scroll', handleScroll);
  // å»¶è¿Ÿåˆå§‹åŒ–è§‚å¯Ÿå™¨ï¼Œç­‰å¾…DOMå®Œå…¨åŠ è½½
  setTimeout(() => {
    observeElements();
  }, 100);
});

onUnmounted(() => {
  document.body.removeEventListener('scroll', handleScroll);
});
</script>